jQuery(document).ready(function(e){var a=-1;function t(){ywqa.recaptcha&&("v2"==ywqa.recaptcha_version&&ywqa.recaptcha&&jQuery("#ywqa-g-recaptcha:empty").length?void 0!==grecaptcha.render&&(a=grecaptcha.render("ywqa-g-recaptcha",{sitekey:ywqa.recaptcha_sitekey})):grecaptcha.ready(function(){grecaptcha.execute(ywqa.recaptcha_sitekey,{action:"homepage"}).then(function(a){e("#ywqa-g-recaptcha").prepend('<input type="hidden" name="g-recaptcha-response" value="'+a+'">')})}))}function n(a,n){var o={action:"show_question_list",product_id:e("#ywqa-questions-and-answers-product-id").val(),answered:a,show_all:n},s=e("#ywqa-questions-and-answers");s.length&&(s.block({message:null,overlayCSS:{background:"#fff url("+ywqa.loader+") no-repeat center",opacity:.6}}),e.post(ywqa.ajax_url,o,function(a){-1==a.code?top.location.replace(a.value):1==a.code&&e("#ywqa-questions-and-answers").replaceWith(a.items),t(),n&&e("#show-all-questions").remove(),s.unblock()}))}function o(a,t){e("<span class='operation-error'>"+t+"</span>").insertAfter(e(a))}function s(a){var t=e("#ywqa_user_content"),n=e('input[name="ywqa-guest-name"]'),s=e('input[name="ywqa-guest-email"]'),r=0;if(0==t.val().length&&(o(t,ywqa.content_is_empty),r=1),n.length&&ywqa.mandatory_guest_data&&!n.val().length&&(o(n,ywqa.guest_name_message),r=1),s.length)if(ywqa.mandatory_guest_data&&!s.val().length)o(s,ywqa.guest_email_message),r=1;else if(s.val().length){/^[A-Z0-9._%+-]+@([A-Z0-9-]+\.)+[A-Z]{2,5}$/i.test(s.val())||(o(s,ywqa.guest_email_message),r=1)}return 0==r}function r(a,n){var o={action:"goto_question",discussion_id:a,order:void 0!==n?n:"default"},s=e("#ywqa-questions-and-answers");s.block({message:null,overlayCSS:{background:"#fff url("+ywqa.loader+") no-repeat center",opacity:.6}}),e.post(ywqa.ajax_url,o,function(a){-1==a.code?top.location.replace(a.value):1==a.code&&e("#ywqa-questions-and-answers").replaceWith(a.items),t(),s.unblock(),e([document.documentElement,document.body]).animate({scrollTop:e(".woocommerce-tabs").offset().top},1e3)})}ywqa.grecaptcha&&grecaptcha.ready(function(){t()}),e(document).on("vc_js",function(){t()}),e("div.woocommerce-tabs ul.tabs li.questions_tab").on("click",function(e){e.preventDefault(),n(!1,!1)}),1==ywqa.goto_questions_tab&&e(document).find(".woocommerce-tabs ul.tabs li.questions_tab a")[0].click(),e(document).on("click","a.vote-question",function(a){a.preventDefault();e(this);var t={action:"vote_question",discussion_id:e(this).attr("data-discussion-id"),discussion_vote:e(this).attr("data-discussion-vote"),_wpnonce:ywqa.nonce_value,return_path:window.location.href},n=e(this).closest("div.question-votes");n.block({message:null,overlayCSS:{background:"#fff url("+ywqa.loader+") no-repeat center",opacity:.6}}),e.post(ywqa.ajax_url,t,function(e){-1==e.code?top.location.replace(e.value):1==e.code&&n.children("span.question-votes-count").text(e.value),n.unblock()})}),e(document).on("click","a.answer-helpful, a.answer-not-helpful",function(a){a.preventDefault();e(this);var t={action:"vote_answer",discussion_id:e(this).attr("data-discussion-id"),discussion_vote:e(this).attr("data-discussion-vote"),_wpnonce:ywqa.nonce_value,return_path:window.location.href},n=e(this).closest("div.answer-helpful");n.block({message:null,overlayCSS:{background:"#fff url("+ywqa.loader+") no-repeat center",opacity:.6}}),e.post(ywqa.ajax_url,t,function(e){-1==e.code?top.location.replace(e.value):1==e.code&&n.children("span.answer-stat-text").text(e.value),n.unblock()})}),e(document).on("click","a.report-answer-abuse",function(a){a.preventDefault();e(this);var t={action:"report_answer_abuse",discussion_id:e(this).attr("data-discussion-id"),discussion_vote:1,_wpnonce:ywqa.nonce_value,return_path:window.location.href},n=e(this).closest("div.answer-abuse");n.block({message:null,overlayCSS:{background:"#fff url("+ywqa.loader+") no-repeat center",opacity:.6}}),e.post(ywqa.ajax_url,t,function(a){-1==a.code?top.location.replace(a.value):1==a.code&&n.empty().html('<span class="thanks">'+ywqa.abuse_response+"</span>"),e(document).trigger("yith_ywqa_answer_helpfull",a),n.unblock()})}),e(document).on("click","a.read-more",function(a){a.preventDefault();var t={action:"get_full_content",discussion_id:e(this).attr("data-discussion-id")},n=e(this).closest("div.answer-content");n.block({message:null,overlayCSS:{background:"#fff url("+ywqa.loader+") no-repeat center",opacity:.6}}),e.post(ywqa.ajax_url,t,function(e){1==e.code&&(n.children(".read-more").remove(),text=e.value.replace(/(?:\r\n|\r|\n)/g,"<br />"),n.children("span.answer").empty().html(text)),n.unblock()})}),e(document).on("click","a.goto-page",function(a){if(a.preventDefault(),e(this).attr("data-ywqa-product-id").length){var t="get_questions",n=e(this).closest("div#ywqa_question_list");e("ol.item-navigation.answers").length&&(t="get_answers",n=e(this).closest("div#ywqa_answer_list"));var o={action:t,product_id:e(this).attr("data-ywqa-product-id"),order:e(this).attr("data-ywqa-order"),question_id:e(this).attr("data-ywqa-question-id"),page:e(this).attr("data-ywqa-page")};n.block({message:null,overlayCSS:{background:"#fff url("+ywqa.loader+") no-repeat center",opacity:.6}}),e.post(ywqa.ajax_url,o,function(e){1==e.code&&(n.find("ol.ywqa-items-list").empty().append(e.items),n.find("ol.item-navigation").empty().append(e.pagination)),n.unblock()})}}),e(document).on("click","input#ywqa-submit-question",function(n){n.preventDefault(),e("span.operation-error").remove(),e("span.operation-completed").remove();try{if(ywqa.recaptcha&&"v2"==ywqa.recaptcha_version&&(null==grecaptcha||!grecaptcha.getResponse(a)))return void e("div.ywqa-ask-question").prepend("<span class='operation-error'>"+ywqa.recaptcha_not_valid+"</span>")}catch(n){return void e("div.ywqa-ask-question").prepend("<span class='operation-error'>"+ywqa.recaptcha_not_valid+"</span>")}if(s()){if("v2"==ywqa.recaptcha_version)var o=e('div#ywqa-g-recaptcha TextArea[name="g-recaptcha-response"]').val();else o=e('div#ywqa-g-recaptcha input[name="g-recaptcha-response"]').val();var r={action:"submit_question",text:e("#ywqa_user_content").val(),subscribe:e("#ywqa-notify-user").length?e("#ywqa-notify-user").prop("checked"):0,product_id:e("#ywqa-questions-and-answers").data("product-id"),recaptcha:o};e("#ywqa-guest-name").length&&(r.name=e("input[name='ywqa-guest-name']").val()),e("#ywqa-guest-email").length&&(r.email=e("input[name='ywqa-guest-email']").val());var i=e("div.ywqa-ask-question");i.block({message:null,overlayCSS:{background:"#fff url("+ywqa.loader+") no-repeat center",opacity:.6}}),e.post(ywqa.ajax_url,r,function(a){1==a.code?(e("#ywqa-questions-and-answers").replaceWith(a.items),t(),1==a.waiting_approval&&e("div#submit_answer").append("<span class='operation-completed'>"+a.message+"</span>")):-1==a.code?e("div#ask_question").empty().append("<span class='operation-completed'>"+a.message+"</span>"):e("div#ask_question").append("<span class='operation-error'>"+ywqa.discussion_error+"</span>"),i.unblock()})}}),e(document).on("click","input#ywqa-submit-answer",function(n){n.preventDefault(),e("span.operation-error").remove(),e("span.operation-completed").remove();try{if(ywqa.recaptcha&&"v2"==ywqa.recaptcha_version&&(null==grecaptcha||!grecaptcha.getResponse(a)))return void e("div#submit_answer").prepend("<span class='operation-error'>"+ywqa.recaptcha_not_valid+"</span>")}catch(n){return void e("div#submit_answer").prepend("<span class='operation-error'>"+ywqa.recaptcha_not_valid+"</span>")}if(s()){if("v2"==ywqa.recaptcha_version)var o=e('div#ywqa-g-recaptcha TextArea[name="g-recaptcha-response"]').val();else o=e('div#ywqa-g-recaptcha input[name="g-recaptcha-response"]').val();var r={action:"submit_answer",answer_content:e("#ywqa_user_content").val(),product_id:e("#ywqa-questions-and-answers").data("product-id"),question_id:e("input[name='ywqa_question_id']").val(),recaptcha:o};e("#ywqa-guest-name").length&&(r.name=e("input[name='ywqa-guest-name']").val()),e("#ywqa-guest-email").length&&(r.email=e("input[name='ywqa-guest-email']").val());var i=e("div.ywqa-send-answer");i.block({message:null,overlayCSS:{background:"#fff url("+ywqa.loader+") no-repeat center",opacity:.6}}),e.post(ywqa.ajax_url,r,function(a){1==a.code?(e("#ywqa-questions-and-answers").replaceWith(a.items),1==a.waiting_approval&&e("div#submit_answer").append("<span class='operation-completed'>"+a.message+"</span>")):-1==a.code?e("div#submit_answer").append("<span class='operation-error'>"+a.message+"</span>"):e("div#submit_answer").append("<span class='operation-error'>"+ywqa.discussion_error+"</span>"),t(),i.unblock()})}}),e(document).on("click","a.ywqa-question-order",function(a){a.preventDefault(),r(e("input[name='ywqa_question_id']").val(),e(this).data("order"))}),e(document).on("click","a.goto-question",function(a){a.preventDefault(),r(e(this).attr("data-discussion-id"))}),e(document).on("click","a.back-to-product",function(e){e.preventDefault(),n(!1,!1)}),e(document).on("input",'input[name="ywqa-search-text"]',function(a){a.preventDefault();var t={action:"filter_content",product_id:e("#ywqa-questions-and-answers-product-id").val(),text:e(this).val()},n=e(this).closest(".ywqa-container").find(".ywqa-content");n.block({message:null,overlayCSS:{background:"#fff url("+ywqa.loader+") no-repeat center",opacity:.6}}),e.post(ywqa.ajax_url,t,function(e){1==e.code&&n.replaceWith(e.items),n.unblock()})}),e(document).on("click","a.show-questions",function(e){e.preventDefault(),n(!1,!0)})});